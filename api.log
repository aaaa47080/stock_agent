/home/danny/AI-agent/.venv/lib/python3.12/site-packages/websockets/legacy/__init__.py:6: DeprecationWarning: websockets.legacy is deprecated; see https://websockets.readthedocs.io/en/stable/howto/upgrade.html for upgrade instructions
  warnings.warn(  # deprecated in 14.0 - 2024-11-09
/home/danny/AI-agent/.venv/lib/python3.12/site-packages/uvicorn/protocols/websockets/websockets_impl.py:17: DeprecationWarning: websockets.server.WebSocketServerProtocol is deprecated
  from websockets.server import WebSocketServerProtocol
INFO:     Started server process [49007]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     Uvicorn running on http://172.23.37.2:8100 (Press CTRL+C to quit)
âœ… Langfuse Callback Handler å·²åˆå§‹åŒ–
ğŸ¤– ç•¶å‰ä½¿ç”¨æ¨¡å‹: Qwen3 4B æ¨™æº–æ¨¡å‹
ğŸ“ æ€è€ƒæ¨™ç±¤éæ¿¾: åœç”¨
âœ… Langfuse é…ç½®å·²è¼‰å…¥ (host: http://localhost:3000)
âœ… å·²é è¼‰ 176 å€‹æ–‡ä»¶åˆ°è¨˜æ†¶é«”
â„¹ï¸ Langfuse æœªå®‰è£ï¼Œå­å•é¡Œè¿½è¹¤åŠŸèƒ½å°‡è¢«åœç”¨
âœ… InMemoryStore å·²åˆå§‹åŒ–ï¼ˆç”¨æ–¼ç·šç´¢å¿«å–ï¼‰

â­ï¸ å·¥å…·ç³»çµ±å·²åœç”¨ï¼ˆå¯åœ¨ config.py çš„ TOOLS_CONFIG ä¸­å•Ÿç”¨ï¼‰

âœ… å•Ÿç”¨ Message Summarization
ğŸ“Š æ‘˜è¦é…ç½®: max_tokens=12000, è§¸ç™¼é–¾å€¼=8000
âœ… å·²æ·»åŠ  'summarize' ç¯€é»åˆ° Graph
âœ… æµç¨‹: START â†’ summarize â†’ extract_current_query

================================================================================
â“ ç•¶å‰å•é¡Œ: å¦‚ä½•å¯ä»¥é é˜²è·Œå€’
================================================================================
âš ï¸ é•·æœŸè¨˜æ†¶å·²åœç”¨
â­ï¸ çŸ­æœŸè¨˜æ†¶å·²åœç”¨ï¼Œè·³éå•é¡Œç²¾ç¢ºåŒ–
ğŸ”€ [è·¯ç”±] route_after_memory - è¿­ä»£æ¬¡æ•¸: 0/20
â­ï¸ é€²å…¥åˆ†é¡æµç¨‹ â†’ classify_query_type
âœ… æŸ¥è©¢é¡å‹: rag_neededï¼Œéœ€è¦æª¢ç´¢çŸ¥è­˜

================================================================================
ğŸ¯ Planning éšæ®µï¼šåˆ†æå•é¡Œè¤‡é›œåº¦
================================================================================
âœ… å·²é€£æ¥åˆ° Valkey/Redis: localhost:6380 (DB 0)
âœ… å·²é€£æ¥åˆ° Valkey/Redis: localhost:6380 (DB 0)
âœ… å·²é€£æ¥åˆ° Valkey/Redis: localhost:6380 (DB 0)
âœ… CacheManager åˆå§‹åŒ–å®Œæˆï¼ˆå¾Œç«¯: Valkey/Redisï¼‰
   - æŸ¥è©¢å¿«å–: ttl=3600s
   - Planning å¿«å–: ttl=7200s
   - æª¢ç´¢å¿«å–: ttl=3600s

âœ… éœ€è¦åˆ†æ­¥æª¢ç´¢
ğŸ“ ç†ç”±: å•é¡ŒåŒ…å«å¤šå€‹ç¨ç«‹çš„é é˜²æªæ–½ï¼Œéœ€è¦å…ˆäº†è§£è·Œå€’çš„é¢¨éšªå› ç´ ï¼Œå†æª¢ç´¢å…·é«”çš„é é˜²æ–¹æ³•ï¼Œä»¥ç¢ºä¿å›ç­”å®Œæ•´ä¸”æœ‰é‚è¼¯é †åºã€‚

ğŸ“‹ æª¢ç´¢è¨ˆåŠƒï¼ˆå…± 3 æ­¥ï¼‰:
  æ­¥é©Ÿ 1: ä»€éº¼æ˜¯è·Œå€’
    ç›®çš„: å»ºç«‹åŸºç¤èªçŸ¥ï¼Œæ˜ç¢ºè·Œå€’çš„å®šç¾©å’Œå¸¸è¦‹æƒ…å¢ƒ
  æ­¥é©Ÿ 2: å¦‚ä½•é é˜²è€å¹´äººè·Œå€’
    ç›®çš„: æä¾›é‡å°ä¸»è¦é«˜é¢¨éšªç¾¤é«”çš„å…·é«”é é˜²æªæ–½
  æ­¥é©Ÿ 3: å¦‚ä½•é é˜²æ…¢æ€§ç—…æ‚£è€…è·Œå€’
    ç›®çš„: è£œå……é‡å°æ…¢æ€§ç—…æ‚£è€…çš„ç‰¹æ®Šé é˜²æ–¹æ³•


================================================================================
ğŸ” é–‹å§‹çŸ¥è­˜æª¢ç´¢ - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 0/5
================================================================================
ğŸ“‚ åœ–ç‰‡è³‡æ–™æºæ˜ å°„å·²å»ºç«‹:
   - public_health: 425 å€‹ PDF
   - infection_control: 116 å€‹ PDF
ğŸ–¼ï¸  åœ–ç‰‡è³‡æ–™æºéæ¿¾: ['public_health']
ğŸ–¼ï¸  æª¢ç´¢åˆ° 3 å¼µç›¸é—œè¡›æ•™åœ–ç‰‡

ğŸ¯ ä½¿ç”¨ Planning è¦åŠƒçš„æª¢ç´¢æ­¥é©Ÿï¼ˆå…± 3 æ­¥ï¼‰
   âœ… å·²å°‡åŸå§‹ä¸»å•é¡ŒåŠ å…¥å­å•é¡Œåˆ—è¡¨ç¬¬ä¸€ä½
ğŸ”’ ä¸»å•é¡Œè·³é Retrieval Cacheï¼ˆéš±ç§ä¿è­·ï¼‰: å¦‚ä½•å¯ä»¥é é˜²è·Œå€’...
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: public_health, educational_images
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: public_health, educational_images
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: public_health, educational_images
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: public_health, educational_images
      ğŸ“„ é–€è¨ºé é˜²è·Œå€’è¡›æ•™å–®.pdf: 479 å­—å…ƒ
      ğŸ“„ é é˜²ç—…äººè·Œå€’è¡›æ•™è³‡æ–™.pdf: 480 å­—å…ƒ
      ğŸ“„ é–€è¨ºé é˜²è·Œå€’è¡›æ•™å–®.pdf: 479 å­—å…ƒ
      ğŸ“„ é é˜²ç—…äººè·Œå€’è¡›æ•™è³‡æ–™.pdf: 480 å­—å…ƒ
      ğŸ“„ é é˜²ç—…äººè·Œå€’è¡›æ•™è³‡æ–™.pdf: 480 å­—å…ƒ
      ğŸ“„ é–€è¨ºé é˜²è·Œå€’è¡›æ•™å–®.pdf: 479 å­—å…ƒ
      ğŸ“„ é é˜²ç—…äººè·Œå€’è¡›æ•™è³‡æ–™.pdf: 833 å­—å…ƒ
      ğŸ“„ é–€è¨ºé é˜²è·Œå€’è¡›æ•™å–®.pdf: 479 å­—å…ƒ
      ğŸ“„ async_pipeline_v2: 520 å­—å…ƒ
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ async_pipeline_v2: 520 å­—å…ƒ
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ async_pipeline_v2: 520 å­—å…ƒ
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ async_pipeline_v2: 504 å­—å…ƒ
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
ğŸ–¼ï¸  å°‡ 3 å¼µè¡›æ•™åœ–ç‰‡çš„åˆ†æå…§å®¹æ³¨å…¥ç‚ºçŸ¥è­˜ç·šç´¢

================================================================================
ğŸ’¬ é–‹å§‹ç”Ÿæˆå›ç­” - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 1/5
================================================================================

ğŸ” [DEBUG] extract_tables_from_metadata: æª¢æŸ¥ 3 å€‹æ–‡æª”
   ğŸ“„ doc_name: é–€è¨ºé é˜²è·Œå€’è¡›æ•™å–®.pdf
      é¡å‹: <class 'dict'>
      has_table: False
      table_images: []
   ğŸ“„ doc_name: é é˜²ç—…äººè·Œå€’è¡›æ•™è³‡æ–™.pdf
      é¡å‹: <class 'dict'>
      has_table: False
      table_images: []
   ğŸ“„ doc_name: async_pipeline_v2
      é¡å‹: <class 'dict'>
      has_table: False
      table_images: []

âœ… [DEBUG] extract_tables_from_metadata: å…±æå– 0 å€‹è¡¨æ ¼åœ–ç‰‡

âœ… å·²æ·»åŠ æ–‡å­—åƒè€ƒè³‡æ–™
âœ… æª¢æ¸¬åˆ° 3 å€‹è¡›æ•™åœ–ç‰‡ï¼ˆå·²å»é‡ï¼‰ï¼Œä¸€ä½µé¡¯ç¤º
âœ… é†«ç™‚å•é¡Œï¼Œé€²å…¥å•é¡Œé¡åˆ¥æª¢æŸ¥

ğŸ” æª¢æŸ¥å•é¡Œé¡åˆ¥ - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 2/5
âœ… å•é¡Œé¡åˆ¥: medicalï¼Œé€²å…¥é©—è­‰

================================================================================
ğŸ” é–‹å§‹é©—è­‰å›ç­” - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 2/5
================================================================================
ğŸ”€ [è·¯ç”±] route_after_validation - è¿­ä»£æ¬¡æ•¸: 2/20, æª¢ç´¢æ¬¡æ•¸: 1, é‡è©¦æ¬¡æ•¸: 0
    é©—è­‰çµæœ: pass
âœ… é©—è­‰é€šé â†’ END
âœ… [Langfuse] Trace ID: 78ce3d7a1520... â†’ å¯åœ¨ http://localhost:3000 æŸ¥çœ‹
INFO:     172.23.37.1:60224 - "POST /chat HTTP/1.1" 200 OK

================================================================================
â“ ç•¶å‰å•é¡Œ: ç¬¬ä¸€æ¬¡æ´—è…çš„æ‚£è€…æ‡‰æ³¨æ„ä»€éº¼ï¼Ÿ
================================================================================
âš ï¸ é•·æœŸè¨˜æ†¶å·²åœç”¨
â­ï¸ çŸ­æœŸè¨˜æ†¶å·²åœç”¨ï¼Œè·³éå•é¡Œç²¾ç¢ºåŒ–
ğŸ”€ [è·¯ç”±] route_after_memory - è¿­ä»£æ¬¡æ•¸: 0/20
â­ï¸ é€²å…¥åˆ†é¡æµç¨‹ â†’ classify_query_type
âœ… æŸ¥è©¢é¡å‹: rag_neededï¼Œéœ€è¦æª¢ç´¢çŸ¥è­˜

================================================================================
ğŸ¯ Planning éšæ®µï¼šåˆ†æå•é¡Œè¤‡é›œåº¦
================================================================================

âœ… éœ€è¦åˆ†æ­¥æª¢ç´¢
ğŸ“ ç†ç”±: é€™å€‹å•é¡Œæ¶‰åŠå¤šå€‹éœ€è¦å…ˆå»ºç«‹åŸºç¤çŸ¥è­˜çš„å­å•é¡Œï¼ŒåŒ…æ‹¬æ´—è…çš„å®šç¾©ã€æ´—è…æ‚£è€…çš„å¸¸è¦‹é¢¨éšªã€ç”Ÿæ´»èª¿æ•´èˆ‡æ³¨æ„äº‹é …ï¼Œå› æ­¤éœ€è¦åˆ†æ­¥æª¢ç´¢ä»¥ç¢ºä¿è³‡è¨Šå®Œæ•´ä¸”æ­£ç¢ºã€‚

ğŸ“‹ æª¢ç´¢è¨ˆåŠƒï¼ˆå…± 4 æ­¥ï¼‰:
  æ­¥é©Ÿ 1: ä»€éº¼æ˜¯æ´—è…
    ç›®çš„: å»ºç«‹å°æ´—è…çš„åŸºæœ¬èªçŸ¥
  æ­¥é©Ÿ 2: ç¬¬ä¸€æ¬¡æ´—è…çš„æ‚£è€…æ‡‰æ³¨æ„å“ªäº›ç”Ÿæ´»ç¿’æ…£
    ç›®çš„: æä¾›ç”Ÿæ´»èª¿æ•´çš„å…·é«”å»ºè­°
  æ­¥é©Ÿ 3: ç¬¬ä¸€æ¬¡æ´—è…çš„æ‚£è€…æ‡‰é¿å…å“ªäº›é£Ÿç‰©æˆ–è—¥ç‰©
    ç›®çš„: åˆ—å‡ºéœ€é¿å…çš„é£²é£Ÿèˆ‡è—¥ç‰©
  æ­¥é©Ÿ 4: ç¬¬ä¸€æ¬¡æ´—è…çš„æ‚£è€…å¦‚ä½•ç…§é¡§èº«é«”èˆ‡å¿ƒç†å¥åº·
    ç›®çš„: æ¶µè“‹èº«å¿ƒç…§è­·çš„é‡é»


================================================================================
ğŸ” é–‹å§‹çŸ¥è­˜æª¢ç´¢ - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 0/5
================================================================================
ğŸ–¼ï¸  è¡›æ•™åœ–ç‰‡æª¢ç´¢å·²åœç”¨

ğŸ¯ ä½¿ç”¨ Planning è¦åŠƒçš„æª¢ç´¢æ­¥é©Ÿï¼ˆå…± 4 æ­¥ï¼‰
   âœ… å·²å°‡åŸå§‹ä¸»å•é¡ŒåŠ å…¥å­å•é¡Œåˆ—è¡¨ç¬¬ä¸€ä½
ğŸ”’ ä¸»å•é¡Œè·³é Retrieval Cacheï¼ˆéš±ç§ä¿è­·ï¼‰: ç¬¬ä¸€æ¬¡æ´—è…çš„æ‚£è€…æ‡‰æ³¨æ„ä»€éº¼ï¼Ÿ...
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: dialysis_education
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: dialysis_education
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: dialysis_education
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: dialysis_education
ğŸ”€ [ROUTE] ä½¿ç”¨è€…æŒ‡å®šè³‡æ–™æº â†’ å¤šè³‡æ–™æºæª¢ç´¢
   æŒ‡å®šè³‡æ–™æº: dialysis_education
      ğŸ“„ é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: 1947 å­—å…ƒ
      ğŸ“„ ä¹¾é«”é‡è©•ä¼°èˆ‡è­·ç†.pdf: 671 å­—å…ƒ
      ğŸ“„ æ–‡æª” é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: å¾ metadata å–å¾—è¡¨æ ¼
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t3.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p3_t1.jpg
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: 2864 å­—å…ƒ
      ğŸ“„ ä¹¾é«”é‡è©•ä¼°èˆ‡è­·ç†.pdf: 671 å­—å…ƒ
      ğŸ“„ æ–‡æª” é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: å¾ metadata å–å¾—è¡¨æ ¼
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p15_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p3_t1.jpg
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: 2779 å­—å…ƒ
      ğŸ“„ æ–‡æª” é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: å¾ metadata å–å¾—è¡¨æ ¼
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t3.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p3_t1.jpg
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: 3713 å­—å…ƒ
      ğŸ“„ æ–‡æª” é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: å¾ metadata å–å¾—è¡¨æ ¼
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p7_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p7_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p7_t3.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p8_t3.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p3_t1.jpg
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼
      ğŸ“„ é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: 1831 å­—å…ƒ
      ğŸ“„ ä¹¾é«”é‡è©•ä¼°èˆ‡è­·ç†.pdf: 671 å­—å…ƒ
      ğŸ“„ æ–‡æª” é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf: å¾ metadata å–å¾—è¡¨æ ¼
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t1.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p2_t2.jpg
         âš ï¸ åœ–ç‰‡ä¸å­˜åœ¨: /home/danny/AI-agent/Agent_System/core/extracted_tables/images/é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•_p3_t1.jpg
   â„¹ï¸  æª¢ç´¢çµæœä¸­ç„¡è¡¨æ ¼å…§å®¹æˆ–æœªåŒ¹é…åˆ°è¡¨æ ¼

================================================================================
ğŸ’¬ é–‹å§‹ç”Ÿæˆå›ç­” - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 1/5
================================================================================

ğŸ” [DEBUG] extract_tables_from_metadata: æª¢æŸ¥ 2 å€‹æ–‡æª”
   ğŸ“„ doc_name: é•·åºšæ…¢æ€§è…è‡Ÿç—…ç…§è­·æŒ‡å¼•.pdf
      é¡å‹: <class 'dict'>
      has_table: False
      table_images: []
   ğŸ“„ doc_name: ä¹¾é«”é‡è©•ä¼°èˆ‡è­·ç†.pdf
      é¡å‹: <class 'dict'>
      has_table: False
      table_images: []

âœ… [DEBUG] extract_tables_from_metadata: å…±æå– 0 å€‹è¡¨æ ¼åœ–ç‰‡

âœ… å·²æ·»åŠ æ–‡å­—åƒè€ƒè³‡æ–™
âœ… é†«ç™‚å•é¡Œï¼Œé€²å…¥å•é¡Œé¡åˆ¥æª¢æŸ¥

ğŸ” æª¢æŸ¥å•é¡Œé¡åˆ¥ - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 2/5
âœ… å•é¡Œé¡åˆ¥: medicalï¼Œé€²å…¥é©—è­‰

================================================================================
ğŸ” é–‹å§‹é©—è­‰å›ç­” - ç•¶å‰è¿­ä»£æ¬¡æ•¸: 2/5
================================================================================
ğŸ”€ [è·¯ç”±] route_after_validation - è¿­ä»£æ¬¡æ•¸: 2/20, æª¢ç´¢æ¬¡æ•¸: 1, é‡è©¦æ¬¡æ•¸: 0
    é©—è­‰çµæœ: pass
âœ… é©—è­‰é€šé â†’ END
âœ… [Langfuse] Trace ID: ad384150f500... â†’ å¯åœ¨ http://localhost:3000 æŸ¥çœ‹
INFO:     172.23.37.1:54676 - "POST /chat HTTP/1.1" 200 OK
